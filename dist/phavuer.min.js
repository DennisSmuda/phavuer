!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("Vue")):"function"==typeof define&&define.amd?define(["Vue"],t):"object"==typeof exports?exports.Phavuer=t(require("Vue")):e.Phavuer=t(e.Vue)}(this,(function(e){return(()=>{"use strict";var t={740:t=>{t.exports=e}},i={};function n(e){var s=i[e];if(void 0!==s)return s.exports;var r=i[e]={exports:{}};return t[e](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{n.r(s),n.d(s,{Body:()=>b,Circle:()=>c,Container:()=>a,Image:()=>g,Light:()=>v,Line:()=>p,Rectangle:()=>h,RoundRectangle:()=>d,Scene:()=>l,Sprite:()=>u,StaticBody:()=>w,Text:()=>y,TilemapLayer:()=>f,Zone:()=>m,createPhavuerApp:()=>x,initGameObject:()=>Y,onPostUpdate:()=>B,onPreUpdate:()=>S,refObj:()=>O,refScene:()=>j,refTo:()=>X});var e=n(740);const t=["pointerdown","pointermove","pointerup","pointerout","wheel"],i=e=>{e.updateDisplayOrigin&&e.updateDisplayOrigin(),e.input?e.input.hitArea.setSize(e.width,e.height):e._events&&t.some((t=>t in e._events))&&e.setInteractive()},r=["tween","tweens","timeline","style"],o={active:e=>t=>e.setActive(t),visible:e=>t=>e.setVisible(t),x:e=>t=>e.setPosition(t,e.y),y:e=>t=>e.setPosition(e.x,t),x1:e=>t=>e.x1=t,y1:e=>t=>e.y1=t,x2:e=>t=>e.x2=t,y2:e=>t=>e.y2=t,rotation:e=>t=>e.setRotation(t),origin:e=>t=>e.setOrigin(t,t),originX:e=>t=>e.setOrigin(t,e.originY),originY:e=>t=>e.setOrigin(e.originX,t),scale:e=>t=>e.setScale(t,t),scaleX:e=>t=>e.setScale(t,e.scaleY),scaleY:e=>t=>e.setScale(e.scaleX,t),width:e=>t=>{e.setSize(t,e.height),i(e)},height:e=>t=>{e.setSize(e.width,t),i(e)},radius:e=>t=>e.setRadius(t),displayWidth:e=>t=>e.setDisplaySize(t,e.displayHeight),displayHeight:e=>t=>e.setDisplaySize(e.displayWidth,t),displayOriginX:e=>t=>e.setDisplayOrigin(t,e.displayOriginY),displayOriginY:e=>t=>e.setDisplayOrigin(e.displayOriginX,t),flipX:e=>t=>e.setFlipX(t),flipY:e=>t=>e.setFlipY(t),depth:e=>t=>e.setDepth(t),alpha:e=>t=>e.setAlpha(t),blendMode:e=>t=>e.setBlendMode(t),pipeline:e=>t=>e.setPipeline(t),intensity:e=>t=>e.setIntensity(t),tint:e=>t=>e.setTint(t),text:e=>t=>e.setText(t),texture:e=>t=>e.setTexture(t,e.frame&&e.frame.name),frame:e=>t=>e.setFrame(t),color:e=>t=>e.setColor(t),fillColor:e=>t=>e.setFillStyle(t,e.fillAlpha),fillAlpha:e=>t=>e.setFillStyle(e.fillColor,t),lineWidth:e=>(t,i)=>{e.setLineWidth?e.setLineWidth(t,i):e.setStrokeStyle(...t?[t,e.strokeColor,e.strokeAlpha]:[])},strokeColor:e=>t=>e.setStrokeStyle(e.lineWidth,t,e.strokeAlpha),strokeAlpha:e=>t=>e.setStrokeStyle(e.lineWidth,e.strokeColor,t),style:e=>t=>e.setStyle(t),lineSpacing:e=>t=>e.setLineSpacing(t),padding:e=>t=>e.setPadding(t),collision:e=>t=>e.setCollision(t),collisionByProperty:e=>t=>e.setCollisionByProperty(t),enable:e=>t=>e.enable=t,immovable:e=>t=>e.setImmovable(t),moves:e=>t=>e.moves=t,bounceX:e=>t=>e.setBounceX(t),bounceY:e=>t=>e.setBounceY(t),drag:e=>t=>e.setDrag(t),dragX:e=>t=>e.setDragX(t),dragY:e=>t=>e.setDragY(t),gravityX:e=>t=>e.setGravityX(t),gravityY:e=>t=>e.setGravityY(t),frictionX:e=>t=>e.setFrictionX(t),frictionY:e=>t=>e.setFrictionY(t),velocityX:e=>t=>e.setVelocityX(t),velocityY:e=>t=>e.setVelocityY(t),maxVelocityX:e=>t=>e.setMaxVelocityX(t),maxVelocityY:e=>t=>e.setMaxVelocityY(t),accelerationX:e=>t=>e.setAccelerationX(t),accelerationY:e=>t=>e.setAccelerationY(t),offsetX:e=>t=>e.setOffset(t,e.offset.y),offsetY:e=>t=>e.setOffset(e.offset.x,t),tween:e=>t=>{e.tween&&e.tween.stop(),t&&(e.tween=e.scene.add.tween(Object.assign({targets:e},t)))},tweens:e=>t=>{e.tween&&e.tween.stop(),t&&(e.tween=e.scene.tweens.timeline({targets:e,tweens:t}))},timeline:e=>t=>{e.tween&&e.tween.stop(),t&&(e.tween=e.scene.tweens.timeline(Object.assign({targets:e},t)))}},l={props:{name:{type:String,require:!0},autoStart:{type:Boolean,default:!0}},setup(t,i){const n=(0,e.ref)(!0),s=[],r=[],o=class extends Phaser.Scene{init(e){n.value=!0,i.emit("init",this,e)}create(e){i.emit("create",this,e)}update(e,t){s.forEach((i=>i(e,t))),i.emit("update",this,e,t),r.forEach((i=>i(e,t)))}preload(){i.emit("preload",this)}},l=(0,e.inject)("game").scene.add(t.name,o,t.autoStart);return l.events.on("shutdown",(()=>n.value=!1)),(0,e.provide)("scene",l),(0,e.provide)("preUpdateEvents",s),(0,e.provide)("postUpdateEvents",r),{scene:l,show:n}},render:function(t,i,n,s,r,o){return(0,e.openBlock)(),(0,e.createElementBlock)("div",null,[s.show?(0,e.renderSlot)(t.$slots,"default",{key:0}):(0,e.createCommentVNode)("v-if",!0)])}},a={setup(t,i){const n=(0,e.inject)("scene"),s=new Phaser.GameObjects.Container(n,t.x||0,t.y||0);return Y(s,t,i),(0,e.provide)("container",s),(0,e.provide)("gameObject",s),{object:s}},props:["tween","tweens","timeline","visible","width","height","rotation","x","y","depth","alpha","blendMode","pipeline"],render:function(t,i,n,s,r,o){return(0,e.openBlock)(),(0,e.createElementBlock)("div",null,[(0,e.renderSlot)(t.$slots,"default")])}},h={setup(t,i){const n=(0,e.inject)("scene"),s=new Phaser.GameObjects.Rectangle(n,t.x||0,t.y||0,t.width,t.height);return Y(s,t,i),(0,e.provide)("gameObject",s),{object:s}},props:["tween","tweens","timeline","visible","x","y","rotation","width","height","origin","originX","originY","displayOriginX","displayOriginY","scale","scaleX","scaleY","displayWidth","displayHeight","depth","alpha","blendMode","pipeline","fillColor","fillAlpha","lineWidth","strokeColor","strokeAlpha"],render:function(t,i,n,s,r,o){return(0,e.openBlock)(),(0,e.createElementBlock)("div",null,[(0,e.renderSlot)(t.$slots,"default")])}},d={setup(t,i){const n=(0,e.inject)("scene");class s extends Phaser.GameObjects.Graphics{constructor(e,t,i,n,s,r){super(e,t,i,n,s),this._originX=0,this._originY=0,this._width=n||0,this._height=s||0,this._radius=r||0,this._fillColor=null,this._fillAlpha=1,this._lineWidth=0,this._strokeColor=null,this._strokeAlpha=1,this.setRenderFlag(!0)}preUpdate(...e){this.renderFlag&&this.render()}setRenderFlag(e){this.renderFlag=e}render(){this.setRenderFlag(!1);const e=this.originX*-this.width,t=this.originY*-this.height,i="number"==typeof this.radius?Math.min(this.radius,this.width.half,this.height.half):this.radius;this.clear(),null!==this.fillColor&&(this.fillStyle(this.fillColor,this.fillAlpha),this.fillRoundedRect(e,t,this.width,this.height,i)),this.lineWidth&&null!==this.strokeColor&&(this.lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha),this.strokeRoundedRect(e,t,this.width,this.height,i))}get originX(){return this._originX}set originX(e){this._originX=e,this.displayOriginX=this.width*e,this.setRenderFlag(!0)}get originY(){return this._originY}set originY(e){this._originY=e,this.displayOriginY=this.height*e,this.setRenderFlag(!0)}setOrigin(e,t){return this.originX=e,this.originY=void 0===t?e:t,this}get radius(){return this._radius}set radius(e){return this._radius=e}setRadius(e){return this.radius=e,this}get width(){return this._width}set width(e){this._width=e,this.fixSize(),this.setRenderFlag(!0)}get height(){return this._height}set height(e){this._height=e,this.fixSize(),this.setRenderFlag(!0)}setSize(e,t){return void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),this}fixSize(){this.input&&this.input.hitArea.setSize(this.width,this.height),this.body&&this.body.setSize(this.width,this.height)}get displayWidth(){return Math.abs(this.scaleX*this.width)}set displayWidth(e){this.scaleX=e/this.width}get displayHeight(){return Math.abs(this.scaleY*this.height)}set displayHeight(e){this.scaleY=e/this.height}get fillColor(){return this._fillColor}set fillColor(e){this._fillColor=e,this.setRenderFlag(!0)}get fillAlpha(){return this._fillAlpha}set fillAlpha(e){this._fillAlpha=e,this.setRenderFlag(!0)}setFillStyle(e,t){return void 0!==e&&(this.fillColor=e),void 0!==t&&(this.fillAlpha=t),this}get lineWidth(){return this._lineWidth}set lineWidth(e){this._lineWidth=e,this.setRenderFlag(!0)}get strokeColor(){return this._strokeColor}set strokeColor(e){this._strokeColor=e,this.setRenderFlag(!0)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(e){this._strokeAlpha=e,this.setRenderFlag(!0)}setStrokeStyle(e,t,i){return void 0!==e&&(this.lineWidth=e),void 0!==t&&(this.strokeColor=t),void 0!==i&&(this.strokeAlpha=i),this}}const r=new s(n,t.x||0,t.y||0,t.width,t.height,t.radius);return Y(r,t,i),(0,e.provide)("gameObject",r),{object:r}},props:["tween","tweens","timeline","visible","x","y","rotation","width","height","origin","originX","originY","displayOriginX","displayOriginY","scale","scaleX","scaleY","displayWidth","displayHeight","depth","alpha","blendMode","pipeline","fillColor","fillAlpha","lineWidth","strokeColor","strokeAlpha","radius"],render:function(t,i,n,s,r,o){return(0,e.openBlock)(),(0,e.createElementBlock)("div",null,[(0,e.renderSlot)(t.$slots,"default")])}},c={setup(t,i){const n=(0,e.inject)("scene"),s=new Phaser.GameObjects.Arc(n,t.x||0,t.y||0,t.radius);return Y(s,t,i),(0,e.provide)("gameObject",s),{object:s}},props:["tween","tweens","timeline","visible","x","y","rotation","radius","origin","originX","originY","displayOriginX","displayOriginY","scale","scaleX","scaleY","displayWidth","displayHeight","depth","alpha","blendMode","pipeline","fillColor","fillAlpha","lineWidth","strokeColor","strokeAlpha"],render:function(t,i,n,s,r,o){return(0,e.openBlock)(),(0,e.createElementBlock)("div",null,[(0,e.renderSlot)(t.$slots,"default")])}},p={setup(t,i){const n=(0,e.inject)("scene"),s=new Phaser.GameObjects.Line(n,t.x||0,t.y||0,t.x1,t.y1,t.x2,t.y2);return Y(s,t,i),(0,e.provide)("gameObject",s),{object:s}},props:["tween","tweens","timeline","visible","x","y","x1","y1","x2","y2","rotation","width","height","origin","originX","originY","displayOriginX","displayOriginY","scale","scaleX","scaleY","displayWidth","displayHeight","depth","alpha","lineWidth","strokeColor","strokeAlpha"],render:function(t,i,n,s,r,o){return(0,e.openBlock)(),(0,e.createElementBlock)("div",null,[(0,e.renderSlot)(t.$slots,"default")])}},g={setup(t,i){const n=(0,e.inject)("scene"),s=new Phaser.GameObjects.Image(n,t.x||0,t.y||0,t.texture);return Y(s,t,i),(0,e.provide)("gameObject",s),{object:s}},props:["tween","tweens","timeline","visible","x","y","rotation","origin","originX","originY","displayOriginX","displayOriginY","scale","scaleX","scaleY","displayWidth","displayHeight","depth","alpha","blendMode","pipeline","texture","frame","tint","flipX","flipY"],render:function(t,i,n,s,r,o){return(0,e.openBlock)(),(0,e.createElementBlock)("div",null,[(0,e.renderSlot)(t.$slots,"default")])}},u={setup(t,i){const n=(0,e.inject)("scene"),s=new Phaser.GameObjects.Sprite(n,t.x||0,t.y||0,t.texture);return Y(s,t,i),(0,e.provide)("gameObject",s),{object:s}},props:["tween","tweens","timeline","visible","x","y","rotation","origin","originX","originY","displayOriginX","displayOriginY","scale","scaleX","scaleY","displayWidth","displayHeight","depth","alpha","blendMode","pipeline","texture","frame","tint","flipX","flipY"],render:function(t,i,n,s,r,o){return(0,e.openBlock)(),(0,e.createElementBlock)("div",null,[(0,e.renderSlot)(t.$slots,"default")])}},y={setup(t,i){const n=(0,e.inject)("scene"),s=new Phaser.GameObjects.Text(n,t.x||0,t.y||0,t.text);return Y(s,t,i),{object:s}},props:["tween","tweens","timeline","visible","text","rotation","x","y","origin","originX","originY","displayOriginX","displayOriginY","scale","scaleX","scaleY","displayWidth","displayHeight","depth","alpha","blendMode","pipeline","style","lineSpacing","padding"],render:function(t,i,n,s,r,o){return(0,e.openBlock)(),(0,e.createElementBlock)("div")}},f={props:["tween","tweens","timeline","visible","x","y","width","height","depth","pipeline","tilemap","layerIndex","tileset","collision","collisionByProperty"],setup(t,i){const n=(0,e.inject)("scene"),s=new Phaser.Tilemaps.TilemapLayer(n,t.tilemap,t.layerIndex,t.tileset,t.x||0,t.y||0);return Y(s,t,i),{object:s}},render:function(t,i,n,s,r,o){return(0,e.openBlock)(),(0,e.createElementBlock)("div")}},m={setup(t,i){const n=(0,e.inject)("scene"),s=new Phaser.GameObjects.Zone(n,t.x||0,t.y||0,t.width,t.height);return Y(s,t,i),{object:s}},props:["tween","tweens","timeline","active","x","y","width","height","origin","originX","originY","displayOriginX","displayOriginY"],render:function(t,i,n,s,r,o){return(0,e.openBlock)(),(0,e.createElementBlock)("div")}},v={setup(t,i){(0,e.inject)("scene");const n=new Phaser.GameObjects.Light(t.x||0,t.y||0);return Y(n,t,i),{object:n}},props:["tween","tweens","timeline","visible","x","y","radius","color","intensity"],render:function(t,i,n,s,r,o){return(0,e.openBlock)(),(0,e.createElementBlock)("div")}},w={setup(t,i){const n=(0,e.inject)("scene"),s=(0,e.inject)("gameObject"),r=n.physics.add.existing(s,Phaser.Physics.Arcade.STATIC_BODY).body;Y(r,t,i)},props:["width","height","offsetX","offsetY","enable"],render:function(t,i,n,s,r,o){return(0,e.openBlock)(),(0,e.createElementBlock)("div")}},b={setup(t,i){const n=(0,e.inject)("scene"),s=(0,e.inject)("gameObject"),r=n.physics.add.existing(s,Phaser.Physics.Arcade.DYNAMIC_BODY).body;Y(r,t,i)},props:["width","height","offsetX","offsetY","enable","immovable","moves","bounceX","bounceY","drag","dragX","dragY","gravityX","gravityY","frictionX","frictionY","velocityX","velocityY","maxVelocityX","maxVelocityY","accelerationX","accelerationY"],render:function(t,i,n,s,r,o){return(0,e.openBlock)(),(0,e.createElementBlock)("div")}},x=(e,t)=>{t.provide("game",e),t.provide("scene",null),t.provide("container",null);const i=window.document.createElement("div");return document.body.appendChild(i),t.mount(i)},Y=(t,i,n)=>{const s="bounce"in t,l=t.constructor===Phaser.GameObjects.Light,a=(0,e.inject)("scene");if(l)a.lights.active||a.lights.enable(),a.lights.lights.push(t);else if(s);else{a.add.existing(t);const i=(0,e.inject)("container");i&&i.add([t])}const h=Object.entries(i).map((([n,s])=>{if(void 0===s)return;if(!o[n])return;const l=o[n](t);return l(s),(0,e.watch)((()=>i[n]),l,{deep:r.includes(n)})}));n.attrs.onCreate&&n.emit("create",t);const d=[{attr:"onPointerdown",emit:"pointerdown",eventIndex:3},{attr:"onPointermove",emit:"pointermove",eventIndex:3},{attr:"onPointerup",emit:"pointerup",eventIndex:3},{attr:"onPointerout",emit:"pointerout",eventIndex:1},{attr:"onWheel",emit:"wheel",eventIndex:4}].filter((e=>e.attr in n.attrs));return d.length&&(t.setInteractive(),d.forEach((e=>{t.on(e.emit,((...t)=>{t[0].stopPropagation=t[e.eventIndex].stopPropagation,n.emit(e.emit,...t)}))}))),(0,e.onBeforeUnmount)((()=>{t.tween&&t.tween.stop(),h.forEach((e=>e&&e()))})),l?(0,e.onBeforeUnmount)((()=>a.lights.removeLight(t))):(0,e.onBeforeUnmount)((()=>t.destroy())),t},X=(t,i)=>(0,e.customRef)(((e,n)=>({get:()=>(e(),t),set(e){t&&e||(t=e?e[i]:null,n())}}))),O=e=>X(e,"object"),j=e=>X(e,"scene"),k=t=>i=>{const n=(0,e.inject)(t);n.push(i),(0,e.onBeforeUnmount)((()=>{const e=n.findIndex((e=>e===i));n.splice(e,1)}))},S=k("preUpdateEvents"),B=k("postUpdateEvents")})(),s})()}));